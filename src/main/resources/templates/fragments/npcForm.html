<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>NPC Form</title>
</head>
<body>
<div th:fragment="npcForm">
    <form id="npcForm" th:action="${formAction}" th:method="${formMethod}" th:object="${npc}">
        <label for="name">Name</label>
        <input type="text" id="name" th:value="${npc.name}" required onclick="this.select();" onfocus="this.select();">

        <label for="species">Species</label>
        <select id="species" required>
            <option th:each="species : ${T(com.npcvillagers.npcvillage.models.enums.Species).values()}"
                    th:value="${species.name()}"
                    th:text="${species.getDisplayName()}"
                    th:selected="${species.name() == npc.species.name()}">Species</option>
        </select>

        <label for="subspecies">Subspecies</label>
        <select id="subspecies" th:data-saved-value="${npc.subspecies}" required>
            <!-- Subspecies options populated here by JavaScript -->
        </select>

        <label for="gender">Gender</label>
        <select id="gender" required>
            <option th:each="gender : ${T(com.npcvillagers.npcvillage.models.enums.Gender).values()}"
                    th:value="${gender.name()}"
                    th:text="${gender.getDisplayName()}"
                    th:selected="${gender.name() == npc.gender.name()}">Gender</option>
        </select>

        <label for="alignment">Alignment</label>
        <select id="alignment" required>
            <option th:each="alignment : ${T(com.npcvillagers.npcvillage.models.enums.Alignment).values()}"
                    th:value="${alignment.name()}"
                    th:text="${alignment.getDisplayName()}"
                    th:selected="${alignment.name() == npc.alignment.name()}">Alignment</option>
        </select>

        <label for="playerRelationship">Player Relationship</label>
        <select id="playerRelationship" required>
            <option th:each="playerRelationship : ${T(com.npcvillagers.npcvillage.models.enums.PlayerRelationship).values()}"
                    th:value="${playerRelationship.name()}"
                    th:text="${playerRelationship.getDisplayName()}"
                    th:selected="${playerRelationship.name() == npc.playerRelationship.name()}">Player Relationship</option>
        </select>

        <label for="campaignStyle">Campaign Style</label>
        <select id="campaignStyle" required>
            <option th:each="campaignStyle : ${T(com.npcvillagers.npcvillage.models.enums.CampaignStyle).values()}"
                    th:value="${campaignStyle.name()}"
                    th:text="${campaignStyle.getDisplayName()}"
                    th:selected="${campaignStyle.name() == npc.campaignStyle.name()}">Campaign Style</option>
        </select>

        <label for="voice">Voice</label>
        <input type="text" id="voice" th:value="${npc.voice}" required>

        <label for="age">Age</label>
        <select id="age" required>
            <option th:each="ageCategory : ${T(com.npcvillagers.npcvillage.models.enums.AgeCategory).values()}"
                    th:value="${ageCategory.name()}"
                    th:text="${ageCategory.getDisplayName()}"
                    th:selected="${ageCategory.name() == npc.ageCategory.name()}">Age</option>
        </select>

        <div id="customAgeDiv" style="display: none;">
            <label for="customAge">Custom Age</label>
            <input type="text" id="customAge" th:value="${npc.customAge}">
        </div>

        <label for="occupation">Occupation</label>
        <select id="occupation"  required>
            <option th:each="occupationCategory : ${T(com.npcvillagers.npcvillage.models.enums.OccupationCategory).values()}"
                    th:value="${occupationCategory.name()}"
                    th:text="${occupationCategory.getDisplayName()}"
                    th:selected="${occupationCategory.name() == npc.occupationCategory.name()}">Occupation</option>
        </select>

        <div id="customOccupationDiv" style="display: none;">
            <label for="customOccupation">Custom Occupation</label>
            <input type="text" id="customOccupation" th:value="${npc.customOccupation}">
        </div>

        <label for="appearance">Appearance</label>
        <input type="text" id="appearance" th:value="${npc.appearance}" required>

        <label for="personality">Personality</label>
        <input type="text" id="personality" th:value="${npc.personality}" required>

        <label for="motivation">Motivation</label>
        <input type="text" id="motivation" th:value="${npc.motivation}" required>

        <label for="ideal">Ideal</label>
        <input type="text" id="ideal" th:value="${npc.ideal}" required>

        <label for="bond">Bond</label>
        <input type="text" id="bond" th:value="${npc.bond}" required>

        <label for="flaw">Flaw</label>
        <input type="text" id="flaw" th:value="${npc.flaw}" required>

        <label for="history">History</label>
        <input type="text" id="history" th:value="${npc.history}" required>

        <input type="submit" th:value="${submitButtonText}" />
    </form>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script th:src="@{/js/npcForm.js}"></script>
</div>
</body>
</html>
